Шифр Цезаря в любую сторону и на любое число.


```C

#include <stdio.h>
#include <string.h>

char ces(char c, int shift) {
    // Приводим сдвиг к диапазону от -25 до 25
    shift = shift % 26;

    int new_index;

    // Если символ — маленькая буква
    if (c >= 'a' && c <= 'z') {
        new_index = c + shift;

        // Если сдвиг вышел за пределы 'z', переходим к большим буквам
        if (new_index > 'z') {
            new_index = 'A' + (new_index - 'z' - 1);  // Переход к 'A'
        } 
        // Если сдвиг вышел за пределы 'a', переходим к большим буквам
        else if (new_index < 'a') {
            new_index = 'Z' - ('a' - new_index - 1);  // Переход к 'Z'
        }
    } 
    // Если символ — большая буква
    else if (c >= 'A' && c <= 'Z') {
        new_index = c + shift;

        // Если сдвиг вышел за пределы 'Z', переходим к маленьким буквам
        if (new_index > 'Z') {
            new_index = 'a' + (new_index - 'Z' - 1);  // Переход к 'a'
        } 
        // Если сдвиг вышел за пределы 'A', переходим к маленьким буквам
        else if (new_index < 'A') {
            new_index = 'z' - ('A' - new_index - 1);  // Переход к 'z'
        }
    } 
    // Для других символов (не букв) возвращаем без изменений
    else {
        return c;
    }

    return (char)new_index;
}


int main() {
    // Открываем файл для чтения и записи (используем "r+")
    char filename[256];
    scanf("%255s", filename);
    FILE *fp = fopen(filename, "r+");
    if (fp == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    int sh;
    printf("Enter the shift: ");
    scanf("%d", &sh);

    char a[1000];
    
    // Читаем строку из файла
    fgets(a, 1000, fp);

    // Применяем шифр к строке
    for (int i = 0; i < strlen(a); i++) {
        a[i] = ces(a[i], sh);
    }

    // Переходим к началу файла, чтобы записать зашифрованные данные
    fseek(fp, 0, SEEK_SET);

    // Записываем зашифрованную строку в файл
    fwrite(a, sizeof(char), strlen(a), fp);

    // Закрываем файл
    fclose(fp);

    return 0;
}


```
